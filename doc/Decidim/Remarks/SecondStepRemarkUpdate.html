<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Decidim::Remarks::SecondStepRemarkUpdate
  
    &mdash; Dokumentacja Decidim KS
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Decidim::Remarks::SecondStepRemarkUpdate";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../../_index.html">Index (S)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Decidim.html" title="Decidim (module)">Decidim</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Remarks.html" title="Decidim::Remarks (module)">Remarks</a></span></span>
     &raquo; 
    <span class="title">SecondStepRemarkUpdate</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Decidim::Remarks::SecondStepRemarkUpdate
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Rectify::Command</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Rectify::Command</li>
          
            <li class="next">Decidim::Remarks::SecondStepRemarkUpdate</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>decidim-remarks/app/commands/decidim/remarks/second_step_remark_update.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>This Command is used EXCLUSIVELY by Unregistered users, to save statistics data for the second step of adding new Remark It uses update method, as data is additional to the required body part of the model. This command is not used in any other moment.</p>

<p>Attributes that are saved through this command:</p>
<ul><li>
<p>signature</p>
</li><li>
<p>email</p>
</li><li>
<p>district_id</p>
</li><li>
<p>age</p>
</li><li>
<p>gender</p>
</li></ul>

<p>In this case Boolean field &#39;edited&#39; has default value of false, as this Command is used only in one specific moment: right after creation to gather statistical data</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#call-instance_method" title="#call (instance method)">#<strong>call</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Updates the remark if valid.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(form, remark)  &#x21d2; SecondStepRemarkUpdate </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Initializes a UpdateRemark Command.</p>
</div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#remark_attributes-instance_method" title="#remark_attributes (instance method)">#<strong>remark_attributes</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#unregistered_author-instance_method" title="#unregistered_author (instance method)">#<strong>unregistered_author</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="private ">
  <span class="summary_signature">
    
      <a href="#update_remark_stats-instance_method" title="#update_remark_stats (instance method)">#<strong>update_remark_stats</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  <span class="note title private">private</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(form, remark)  &#x21d2; <tt><span class='object_link'><a href="" title="Decidim::Remarks::SecondStepRemarkUpdate (class)">SecondStepRemarkUpdate</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Initializes a UpdateRemark Command.</p>

<p>form - The form from which to get the data. current_user - The current instance of the remark to be updated.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


23
24
25
26
27
28
29</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-remarks/app/commands/decidim/remarks/second_step_remark_update.rb', line 23</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_form'>form</span><span class='comma'>,</span> <span class='id identifier rubyid_remark'>remark</span><span class='rparen'>)</span>
  <span class='ivar'>@form</span> <span class='op'>=</span> <span class='id identifier rubyid_form'>form</span>
  <span class='ivar'>@remark</span> <span class='op'>=</span> <span class='id identifier rubyid_remark'>remark</span>
  <span class='ivar'>@current_organization</span> <span class='op'>=</span> <span class='id identifier rubyid_form'>form</span><span class='period'>.</span><span class='id identifier rubyid_current_organization'>current_organization</span>
  <span class='ivar'>@component</span> <span class='op'>=</span> <span class='id identifier rubyid_form'>form</span><span class='period'>.</span><span class='id identifier rubyid_component'>component</span>
  <span class='ivar'>@author</span> <span class='op'>=</span> <span class='id identifier rubyid_unregistered_author'>unregistered_author</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="call-instance_method">
  
    #<strong>call</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Updates the remark if valid.</p>

<p>Broadcasts :ok if successful, :invalid otherwise.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


34
35
36
37
38
39</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-remarks/app/commands/decidim/remarks/second_step_remark_update.rb', line 34</span>

<span class='kw'>def</span> <span class='id identifier rubyid_call'>call</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_broadcast'>broadcast</span><span class='lparen'>(</span><span class='symbol'>:invalid</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@form</span><span class='period'>.</span><span class='id identifier rubyid_invalid?'>invalid?</span>

  <span class='id identifier rubyid_update_remark_stats'>update_remark_stats</span>
  <span class='id identifier rubyid_broadcast'>broadcast</span><span class='lparen'>(</span><span class='symbol'>:ok</span><span class='comma'>,</span> <span class='ivar'>@remark</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="remark_attributes-instance_method">
  
    #<strong>remark_attributes</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


47
48
49
50
51
52
53
54
55</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-remarks/app/commands/decidim/remarks/second_step_remark_update.rb', line 47</span>

<span class='kw'>def</span> <span class='id identifier rubyid_remark_attributes'>remark_attributes</span>
  <span class='lbrace'>{</span>
    <span class='label'>signature:</span> <span class='ivar'>@form</span><span class='period'>.</span><span class='id identifier rubyid_signature'>signature</span><span class='comma'>,</span>
    <span class='label'>email:</span> <span class='ivar'>@form</span><span class='period'>.</span><span class='id identifier rubyid_email'>email</span><span class='comma'>,</span>
    <span class='label'>district_id:</span> <span class='ivar'>@form</span><span class='period'>.</span><span class='id identifier rubyid_district_id'>district_id</span><span class='comma'>,</span>
    <span class='label'>age:</span> <span class='ivar'>@form</span><span class='period'>.</span><span class='id identifier rubyid_age'>age</span><span class='comma'>,</span>
    <span class='label'>gender:</span> <span class='ivar'>@form</span><span class='period'>.</span><span class='id identifier rubyid_gender'>gender</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unregistered_author-instance_method">
  
    #<strong>unregistered_author</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


57
58
59</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-remarks/app/commands/decidim/remarks/second_step_remark_update.rb', line 57</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unregistered_author'>unregistered_author</span>
  <span class='const'><span class='object_link'><a href="../../Decidim.html" title="Decidim (module)">Decidim</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../CommentsExtended.html" title="Decidim::CommentsExtended (module)">CommentsExtended</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../CommentsExtended/UnregisteredAuthor.html" title="Decidim::CommentsExtended::UnregisteredAuthor (class)">UnregisteredAuthor</a></span></span><span class='period'>.</span><span class='id identifier rubyid_where'>where</span><span class='lparen'>(</span><span class='label'>organization:</span> <span class='ivar'>@current_organization</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="update_remark_stats-instance_method">
  
    #<strong>update_remark_stats</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(private)</span>
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


43
44
45</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'decidim-remarks/app/commands/decidim/remarks/second_step_remark_update.rb', line 43</span>

<span class='kw'>def</span> <span class='id identifier rubyid_update_remark_stats'>update_remark_stats</span>
  <span class='ivar'>@remark</span><span class='period'>.</span><span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='id identifier rubyid_remark_attributes'>remark_attributes</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Feb 27 19:18:19 2023 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.28 (ruby-2.7.5).
</div>

    </div>
  </body>
</html>